language: csharp
solution: DotNetRetry.sln
script:
  - msbuild /p:Configuration=Release DotNetRetry.sln
  - mono ./packages/xunit.runner.console.*/tools/net452/xunit.console.exe ./DotNetRetryTests/bin/Release/DotNetRetry.Unit.Tests.dll

# require the branch name to be master for deployment
deploy:
	skip_cleanup: true
	provider: script
	script: chmod +x ./deploy.sh && ./deploy.sh $NUGET_API_KEY $NUGET_SOURCE
	on:
		branch: master

after_deploy:
	echo 'TODO'